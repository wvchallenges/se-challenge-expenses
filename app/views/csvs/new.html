<div id='content'>
  <div ng-controller='upload'>
    <accordion close-others='true'>
      <accordion-group>
        <accordion-heading>
          <i class='glyphicon glyphicon-search'></i>  Search for an existing file
        </accordion-heading>

        <input ng-show='files' type="text" 
               placeholder="Type the name of the file"
               ng-model="filename" 
               typeahead="file as file.name for file in files | filter:$viewValue" 
               typeahead-on-select="onSelect($item)"
               class="form-control"/>
        <p ng-hide='files'>
          You haven't imported any files yet. 
        </p>

      </accordion-group>
      <accordion-group is-open='is_open'>
        <accordion-heading>
          <i class='glyphicon glyphicon-tag'></i>  Select a file for upload here
        </accordion-heading>

        <input type='file' ng-file-select='onFileSelect($files)'>
      </accordion-group>
      <accordion-group> 
        <accordion-heading>
          <i class='glyphicon glyphicon-tags'></i>&nbsp;  Or drag and drop multiple files here
        </accordion-heading>

        <div ng-file-drop='onFileSelect($files)' ng-file-drag-over-class='drag_over'
             class='drag_drop'
             ng-show='dropSupported'>drop files here</div>
        <div ng-file-drop-available='dropSupported=true' 
             ng-show='!dropSupported'>HTML5 Drop File is not supported!</div>
      </accordion-group>
    </accordion>

    <div ng-if='percent != 0'>
      <progressbar animate='false' value='percent' type='success'><b>{{percent}}%</b></progressbar>
    </div>

  </div>

  <div ng-controller='report'>
    <div ng-if='report != null'>
      <div class='breadcrumb'>
        Now viewing : <kbd>{{report.filename}}</kbd>
      </div>
      <table class='table table-striped table-hover'>
        <thead>
          <tr>
            <th>Month</th>
            <th>Total Expenses</th>
            <th width='55%'>Graph</th>
          </tr>
        </thead>
        <tbody>
        <tr ng-repeat='month in report.months'>
          <td>{{month.month}}</td>
          <td>${{month.total_expenses.toFixed(2)}}</td> 
          <td>
            <div class='graph_bar' 
                 ng-style="{ 'width' : get_width(month.total_expenses), 'background-color' : randomize_color($index) }">&nbsp;</div> 
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>

</div>
