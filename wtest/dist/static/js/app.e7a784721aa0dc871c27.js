webpackJsonp([1,0],[function(t,e,s){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}var r=s(10),o=a(r),i=s(5),n=a(i);o["default"].use(s(9)),o["default"].component("uploader",s(6)),new o["default"]({el:"#app",template:"<App/>",components:{App:n["default"]}})},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={name:"app",data:function(){return{apiUrl:location.protocol+"//"+location.hostname+":5891/",isConnected:!1,replace:!1,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],cred:{dbuser:"",dbpass:"",dbhost:"localhost",dbport:3306,dbname:"wave_test"},entries:[],error:""}},watch:{replace:function(t){this.$http.post(this.apiUrl+"setReplaceData",{replace:t})},isConnected:function(t){t&&this.loadData()}},methods:{connectDB:function(){var t=this;return this.error="",this.cred.dbuser&&this.cred.dbpass&&this.cred.dbhost&&this.cred.dbport?void this.$http.post(this.apiUrl+"credentials",this.cred).then(function(e){t.isConnected=e.body.result,t.isConnected||(t.error=e.body.msg)}):void(this.error="Please fill in all the values")},loadData:function(){var t=this;this.$http.post(this.apiUrl+"getData").then(function(e){t.entries=e.body})}},mounted:function(){var t=this;this.$http.post(this.apiUrl+"isConnected").then(function(e){t.isConnected=e.body.result},function(e){t.error="Could not connect to server. Please make sure 'wtest' is running"})}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={props:{url:null,placeholder:null,fileType:{"default":".csv"}},data:function(){return{fl:!1,uploadedBytes:0,totalBytes:0}},methods:{dropFileHandle:function(t){this.dragOverHandle(t);var e=t.target.files||t.dataTransfer.files;this.totalBytes=0,this.uploadedBytes=0;for(var s=0;s<e.length;s++)this.totalBytes+=e[s].size;return this.startUpload(e[0]),!1},dragOverHandle:function(t){t.stopPropagation(),t.preventDefault(),"dragover"==t.type?(t.target.classList.add("alert-success","v-up-drag"),t.target.classList.remove("alert-info")):(t.target.classList.remove("alert-success","v-up-drag"),t.target.classList.add("alert-info"))},dzClickHandle:function(t){this.fl.click(),this.fl.value=null},startUpload:function(t){var e=this,s=new XMLHttpRequest,a=0;s.upload.addEventListener("progress",function(t){e.uploadedBytes+=t.loaded-a,a=t.loaded},!1),s.onreadystatechange=function(t){if(4==s.readyState){var a=200==s.status,r=JSON.parse(s.responseText);a&&r.success?e.uploadedBytes>=e.totalBytes&&e.$emit("upload-complete",1):e.uploadedBytes>=e.totalBytes&&e.$emit("upload-complete",0)}};var r=new FormData;r.append("wfile",t),s.open("post",this.url,!0),s.send(r)}},mounted:function(){this.fl=this.$refs.uploadInput}}},function(t,e){},function(t,e){},function(t,e,s){var a,r;s(4),a=s(1);var o=s(8);r=a=a||{},"object"!=typeof a["default"]&&"function"!=typeof a["default"]||(r=a=a["default"]),"function"==typeof r&&(r=r.options),r.render=o.render,r.staticRenderFns=o.staticRenderFns,r._scopeId="data-v-9d52e714",t.exports=a},function(t,e,s){var a,r;s(3),a=s(2);var o=s(7);r=a=a||{},"object"!=typeof a["default"]&&"function"!=typeof a["default"]||(r=a=a["default"]),"function"==typeof r&&(r=r.options),r.render=o.render,r.staticRenderFns=o.staticRenderFns,r._scopeId="data-v-43e89a88",t.exports=a},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"v-up form-control alert-info",on:{dragover:dragOverHandle,dragleave:dragOverHandle,drop:dropFileHandle,click:dzClickHandle}},[_h("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"uploadInput",attrs:{id:"v-up-infile",type:"file",accept:fileType},on:{change:dropFileHandle}})," ",_h("div",{directives:[{name:"show",rawName:"v-show",value:totalBytes>0&&totalBytes>uploadedBytes,expression:"totalBytes>0&&totalBytes>uploadedBytes"}],staticClass:"progress"},[_h("div",{"class":["progress-bar","progress-bar-success","progress-bar-striped",{active:uploadedBytes<totalBytes}],style:{width:100*uploadedBytes/totalBytes+"%"}},["\n      "+_s(Math.round(100*uploadedBytes/totalBytes))+"%\n    "])])," ",_h("div",{directives:[{name:"show",rawName:"v-show",value:placeholder&&totalBytes<=uploadedBytes,expression:"placeholder && totalBytes<=uploadedBytes"}],staticClass:"text-center v-up-placeholder"},["\n    "+_s(placeholder)+"\n  "])])},staticRenderFns:[]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{attrs:{id:"app"}},[_h("div",{staticClass:"container"},[_m(0)," ",isConnected?_h("div",[_h("div",{staticClass:"row"},[_h("div",{staticClass:"col-xs-12 text-center"},[_m(1)," ",_h("input",{directives:[{name:"model",rawName:"v-model",value:replace,expression:"replace"}],attrs:{id:"cbReplace",type:"checkbox"},domProps:{checked:Array.isArray(replace)?_i(replace,null)>-1:_q(replace,!0)},on:{change:function(t){var e=replace,s=t.target,a=!!s.checked;if(Array.isArray(e)){var r=null,o=_i(e,r);a?o<0&&(replace=e.concat(r)):o>-1&&(replace=e.slice(0,o).concat(e.slice(o+1)))}else replace=a}}})])])," ",_h("div",{staticClass:"row"},[_h("div",{staticClass:"col-sm-4 col-sm-offset-4"},[_h("uploader",{attrs:{url:apiUrl+"upload",placeholder:"drop file here"},on:{"upload-complete":loadData}})])])," ",_m(2)," ",_h("div",{directives:[{name:"show",rawName:"v-show",value:entries.length,expression:"entries.length"}],staticClass:"row bold"},[_m(3)," ",_m(4)," ",_m(5)])," ",_l(entries,function(t){return _h("div",{staticClass:"row"},[_h("div",{staticClass:"col-xs-4 col-sm-1 col-sm-offset-4"},[_s(t.year)])," ",_h("div",{staticClass:"col-xs-4 col-sm-1"},[_s(monthNames[t.month-1])])," ",_h("div",{staticClass:"col-xs-4 col-sm-2 text-right"},["$ "+_s(t.total.toFixed(2))])])})]):_h("div",[_h("div",{staticClass:"row"},[_h("div",{staticClass:"col-sm-6 col-sm-offset-3"},[_h("div",{directives:[{name:"show",rawName:"v-show",value:error,expression:"error"}],staticClass:"alert alert-danger"},[_h("span",{staticClass:"glyphicon glyphicon-exclamation-sign",attrs:{"aria-hidden":"true"}}),"\n\t\t\t\t\t\t\t"+_s(error)+"\n\t\t\t\t\t\t"])," ",_h("div",{staticClass:"well"},[_h("form",{on:{submit:function(t){t.preventDefault(),connectDB(t)}}},[_h("div",{staticClass:"form-group"},[_h("label",{attrs:{"for":"dbuser"}},["MySQL username"])," ",_h("input",{directives:[{name:"model",rawName:"v-model",value:cred.dbuser,expression:"cred.dbuser"}],staticClass:"form-control",attrs:{type:"text",id:"dbuser",placeholder:"Username"},domProps:{value:_s(cred.dbuser)},on:{input:function(t){t.target.composing||(cred.dbuser=t.target.value)}}})])," ",_h("div",{staticClass:"form-group"},[_h("label",{attrs:{"for":"dbpass"}},["MySQL password"])," ",_h("input",{directives:[{name:"model",rawName:"v-model",value:cred.dbpass,expression:"cred.dbpass"}],staticClass:"form-control",attrs:{type:"password",id:"dbpass",placeholder:"Password"},domProps:{value:_s(cred.dbpass)},on:{input:function(t){t.target.composing||(cred.dbpass=t.target.value)}}})])," ",_h("div",{staticClass:"form-group"},[_h("label",{attrs:{"for":"dbhost"}},["MySQL hostname"])," ",_h("input",{directives:[{name:"model",rawName:"v-model",value:cred.dbhost,expression:"cred.dbhost"}],staticClass:"form-control",attrs:{type:"text",id:"dbhost",placeholder:"Enter withtout protocol please"},domProps:{value:_s(cred.dbhost)},on:{input:function(t){t.target.composing||(cred.dbhost=t.target.value)}}})])," ",_h("div",{staticClass:"form-group"},[_h("label",{attrs:{"for":"dbport"}},["MySQL port"])," ",_h("input",{directives:[{name:"model",rawName:"v-model",value:cred.dbport,expression:"cred.dbport"}],staticClass:"form-control",attrs:{type:"number",id:"dbport"},domProps:{value:_s(cred.dbport)},on:{input:function(t){t.target.composing||(cred.dbport=_n(t.target.value))}}})])," ",_h("div",{staticClass:"form-group"},[_h("label",{attrs:{"for":"dbname"}},["MySQL DB name"])," ",_h("input",{directives:[{name:"model",rawName:"v-model",value:cred.dbname,expression:"cred.dbname"}],staticClass:"form-control",attrs:{type:"text",id:"dbname"},domProps:{value:_s(cred.dbname)},on:{input:function(t){t.target.composing||(cred.dbname=t.target.value)}}})])," ",_h("button",{staticClass:"btn btn-default",attrs:{type:"submit"}},["Submit"])])])])])])," "])])},staticRenderFns:[function(){with(this)return _h("div",{staticClass:"row"},[_h("div",{staticClass:"col-xs-12"},[" "])])},function(){with(this)return _h("label",{attrs:{"for":"cbReplace"}},["Replace existing data"])},function(){with(this)return _h("div",{staticClass:"row"},[_h("div",{staticClass:"col-xs-12"},[" "])])},function(){with(this)return _h("div",{staticClass:"col-xs-4 col-sm-1 col-sm-offset-4"},["Year"])},function(){with(this)return _h("div",{staticClass:"col-xs-4 col-sm-1"},["Month"])},function(){with(this)return _h("div",{staticClass:"col-xs-4 col-sm-2 text-right"},["Total"])}]}}]);
//# sourceMappingURL=app.e7a784721aa0dc871c27.js.map